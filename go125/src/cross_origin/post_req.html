<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>POST Form Example</title>
  </head>
  <body>
    <h1>POST Form Example</h1>

    <form id="postForm">
      <label>
        Name:
        <input type="text" name="name" value="John" />
      </label>
      <br />
      <label>
        Age:
        <input type="number" name="age" value="30" />
      </label>
      <br />
      <button type="submit">POST /</button>
    </form>

    <p></p>

    <form id="postForm2">
      <label>
        Name:
        <input type="text" name="name" value="John" />
      </label>
      <br />
      <label>
        Age:
        <input type="number" name="age" value="30" />
      </label>
      <br />
      <button type="submit">POST /a/b</button>
    </form>

    <script>
      function attachFormListener(form, url) {
        form.addEventListener('submit', function (e) {
          e.preventDefault(); // 阻止默认提交

          const formData = new URLSearchParams(new FormData(form));
          fetch(url, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: formData,
          })
            .then((response) => response.text())
            .then((data) => {
              console.log('Server response:', data);
              alert('Server response: ' + data);
            })
            .catch((err) => console.error(err));
        });
      }

      const form = document.getElementById('postForm');
      attachFormListener(form, 'http://127.0.0.1:18080');

      const form2 = document.getElementById('postForm2');
      attachFormListener(form2, 'http://127.0.0.1:18080/a/b');
    </script>
  </body>
</html>
